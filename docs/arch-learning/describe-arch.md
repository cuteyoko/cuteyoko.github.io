# 如何描述架构

## 起因

沟通不畅，作为一个熟知产品流程乃至源代码的人却没有办法从整体的角度向别人描述架构，多少令人不快。

## 何谓架构

粗浅来理解，架构是系统组成的框架性描述，指导别人明白如何系统性搭建这样一个系统。

架构主要包括如下部分：

- 基本元素，元素之间的关系构成的结构集
- 基本属性
- 演进原则

架构的来源 => 功能 + 质量属性 + 约束

## 如何做架构

领域模型DDD -> 原则、参考、约束 -> 产品架构 ----> 开发

- 领域模型：业务领域的抽象，从一定高度和通用业务流程来描述。
- 原则： 安全、可信、可扩展...
- 产品架构：多视图，多视角

## 架构描述：五视图法（4+1）

架构视图，从某一视角或者某一点看到的系统简化描述。

4+1视图描述：

- 逻辑视图： 逻辑结构
- 开发视图： 代码结构，构建结构
- 部署视图： 交付 安装 部署
- 运行视图： 运行 启动 交互
- 用例视图： 增加用例作为输入 +1

多个视图，需要保证信息一致。

### 用例视图

描述系统边界和上下文：系统职责，边界，关键用例交互：

- 上下文模型：系统本身及外部实体作为黑盒，描述系统对外的接口（物理接口，逻辑接口，协议栈等），物理边界
- 用例： 行为边界

### 逻辑架构

描述系统分解及技术方案，分层、分块

- 技术支撑部件（抽象出来，可以切换）
- 逻辑模型，不涉及具体技术实现
- 希望和代码组件、服务等对应（合适的粒度）

本质问题：系统分解

- 逻辑模型：功能分解？x -> 抽象聚类 -> 关注系统构成
- 数据模型：ER图，数据流，数据结构
- 技术模型： 关注技术选型，技术栈，版本，版本演进

DDD =》 Domain Driven， 以业务模型驱动： 详解->课程学习。

### 开发视图

- 逻辑视图与代码一致性构建件映射 微服务、组件独立代码仓/目录对应
- 代码依赖模型： 依赖关系映射与逻辑模型一致
- 构建模型：平台、工具、脚本抽象

### 部署视图

- 二进制打包 交付模型：
- 部署模型：服务器上如何部署，典型部署，约束

### 运行视图

- 逻辑 任务映射
- 并发处理
- 关键运行设计

## 待续

知其然，不知其所以然，慢慢来。
