# 程序文件解析

## elf格式

> 在计算机科学中，是一种用于二进制文件、可执行文件、目标代码、共享库和核心转储格式文件。
> 是UNIX系统实验室（USL）作为应用程序二进制接口（Application Binary Interface，ABI）而开发和发布的,
> 也是Linux的主要可执行文件格式。

## 实例解析

例程

```cpp
// file: test.cpp
int foo(int a, int b)
{
    return a + b;
}

```

编译
```
g++ -std=c++11 -c test.cpp
# 生成 test.o
```

通过执行如下命令`xxd test.o`, 查看二进制文件，结果如下

```
0000000: 7f45 4c46 0201 0100 0000 0000 0000 0000  .ELF............
0000010: 0100 3e00 0100 0000 0000 0000 0000 0000  ..>.............
0000020: 0000 0000 0000 0000 2002 0000 0000 0000  ........ .......
0000030: 0000 0000 4000 0000 0000 4000 0b00 0a00  ....@.....@.....
0000040: 5548 89e5 897d fc89 75f8 8b45 f88b 55fc  UH...}..u..E..U.
0000050: 01d0 5dc3 0047 4343 3a20 2847 4e55 2920  ..]..GCC: (GNU) 
0000060: 342e 382e 3520 3230 3135 3036 3233 2028  4.8.5 20150623 (
0000070: 5265 6420 4861 7420 342e 382e 352d 3339  Red Hat 4.8.5-39
0000080: 2900 0000 0000 0000 1400 0000 0000 0000  )...............
0000090: 017a 5200 0178 1001 1b0c 0708 9001 0000  .zR..x..........
00000a0: 1c00 0000 1c00 0000 0000 0000 1400 0000  ................
00000b0: 0041 0e10 8602 430d 064f 0c07 0800 0000  .A....C..O......
00000c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
00000d0: 0000 0000 0000 0000 0100 0000 0400 f1ff  ................
00000e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
00000f0: 0000 0000 0300 0100 0000 0000 0000 0000  ................
0000100: 0000 0000 0000 0000 0000 0000 0300 0200  ................
0000110: 0000 0000 0000 0000 0000 0000 0000 0000  ................
0000120: 0000 0000 0300 0300 0000 0000 0000 0000  ................
0000130: 0000 0000 0000 0000 0000 0000 0300 0500  ................
0000140: 0000 0000 0000 0000 0000 0000 0000 0000  ................
0000150: 0000 0000 0300 0600 0000 0000 0000 0000  ................
0000160: 0000 0000 0000 0000 0000 0000 0300 0400  ................
0000170: 0000 0000 0000 0000 0000 0000 0000 0000  ................
0000180: 0a00 0000 1200 0100 0000 0000 0000 0000  ................
0000190: 1400 0000 0000 0000 0074 6573 742e 6370  .........test.cp
00001a0: 7000 5f5a 3366 6f6f 6969 0000 0000 0000  p._Z3fooii......
00001b0: 2000 0000 0000 0000 0200 0000 0200 0000   ...............
00001c0: 0000 0000 0000 0000 002e 7379 6d74 6162  ..........symtab
00001d0: 002e 7374 7274 6162 002e 7368 7374 7274  ..strtab..shstrt
00001e0: 6162 002e 7465 7874 002e 6461 7461 002e  ab..text..data..
00001f0: 6273 7300 2e63 6f6d 6d65 6e74 002e 6e6f  bss..comment..no
0000200: 7465 2e47 4e55 2d73 7461 636b 002e 7265  te.GNU-stack..re
0000210: 6c61 2e65 685f 6672 616d 6500 0000 0000  la.eh_frame.....
0000220: 0000 0000 0000 0000 0000 0000 0000 0000  ................
0000230: 0000 0000 0000 0000 0000 0000 0000 0000  ................
0000240: 0000 0000 0000 0000 0000 0000 0000 0000  ................
0000250: 0000 0000 0000 0000 0000 0000 0000 0000  ................
0000260: 1b00 0000 0100 0000 0600 0000 0000 0000  ................
0000270: 0000 0000 0000 0000 4000 0000 0000 0000  ........@.......
0000280: 1400 0000 0000 0000 0000 0000 0000 0000  ................
0000290: 0100 0000 0000 0000 0000 0000 0000 0000  ................
00002a0: 2100 0000 0100 0000 0300 0000 0000 0000  !...............
00002b0: 0000 0000 0000 0000 5400 0000 0000 0000  ........T.......
00002c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
00002d0: 0100 0000 0000 0000 0000 0000 0000 0000  ................
00002e0: 2700 0000 0800 0000 0300 0000 0000 0000  '...............
00002f0: 0000 0000 0000 0000 5400 0000 0000 0000  ........T.......
0000300: 0000 0000 0000 0000 0000 0000 0000 0000  ................
0000310: 0100 0000 0000 0000 0000 0000 0000 0000  ................
0000320: 2c00 0000 0100 0000 3000 0000 0000 0000  ,.......0.......
0000330: 0000 0000 0000 0000 5400 0000 0000 0000  ........T.......
0000340: 2e00 0000 0000 0000 0000 0000 0000 0000  ................
0000350: 0100 0000 0000 0000 0100 0000 0000 0000  ................
0000360: 3500 0000 0100 0000 0000 0000 0000 0000  5...............
0000370: 0000 0000 0000 0000 8200 0000 0000 0000  ................
0000380: 0000 0000 0000 0000 0000 0000 0000 0000  ................
0000390: 0100 0000 0000 0000 0000 0000 0000 0000  ................
00003a0: 4a00 0000 0100 0000 0200 0000 0000 0000  J...............
00003b0: 0000 0000 0000 0000 8800 0000 0000 0000  ................
00003c0: 3800 0000 0000 0000 0000 0000 0000 0000  8...............
00003d0: 0800 0000 0000 0000 0000 0000 0000 0000  ................
00003e0: 4500 0000 0400 0000 4000 0000 0000 0000  E.......@.......
00003f0: 0000 0000 0000 0000 b001 0000 0000 0000  ................
0000400: 1800 0000 0000 0000 0800 0000 0600 0000  ................
0000410: 0800 0000 0000 0000 1800 0000 0000 0000  ................
0000420: 0100 0000 0200 0000 0000 0000 0000 0000  ................
0000430: 0000 0000 0000 0000 c000 0000 0000 0000  ................
0000440: d800 0000 0000 0000 0900 0000 0800 0000  ................
0000450: 0800 0000 0000 0000 1800 0000 0000 0000  ................
0000460: 0900 0000 0300 0000 0000 0000 0000 0000  ................
0000470: 0000 0000 0000 0000 9801 0000 0000 0000  ................
0000480: 1300 0000 0000 0000 0000 0000 0000 0000  ................
0000490: 0100 0000 0000 0000 0000 0000 0000 0000  ................
00004a0: 1100 0000 0300 0000 0000 0000 0000 0000  ................
00004b0: 0000 0000 0000 0000 c801 0000 0000 0000  ................
00004c0: 5400 0000 0000 0000 0000 0000 0000 0000  T...............
00004d0: 0100 0000 0000 0000 0000 0000 0000 0000  ................
```
