# 从零开始c++：从操作系统到main函数

## 从exe到内存

前文可知，除了一些特殊的程序，其他程序都需要加载到内存中才可以运行。而当前程序是存储再硬盘之中的。

所以就需要一种将磁盘内容装入内存的机制。但由于单个文件可能超过内存大小限制，同时操作系统可能有多个程序同时运行。因此不能直接一对一映射装入。

这里可能涉及：
- 虚拟内存
- 内存段页式管理
- 内存换入换出

其最终的机制是借助各种机制将可执行文件载入到内存中，让用户无感地认为整个程序都在内存之中。【不详述】

## main函数之前

通常我们讲，main函数是程序的入口。这种说法多少有些误导，仔细来说就是操作系统执行你所编译链接出来的可执行文件时，仍然要做一些“微不足道”的工作。准备完毕后才会跳转到main函数。

回到加载可执行文件的地方，操作系统了解可执行文件的通用格式，可以分析可执行文件的结构，为应用程序准备相关的执行条件(如参数)，然后跳转到可执行文件指定的位置来运行【设置CS:IP】。

然而可执行文件中指定的位置并非main函数。

这是怎么回事？指向了哪里呢？

### 可执行文件链接过程

https://www.cnblogs.com/xuanyuan/p/13894905.html
